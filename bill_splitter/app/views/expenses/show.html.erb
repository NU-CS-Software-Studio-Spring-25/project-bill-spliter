<h1>Expense Details</h1>

<p>
    <strong>Description:</strong> <%= @expense.description %>
</p>
<p>
    <strong>Total Amount:</strong> <%= @expense.total_amount %>
</p>
<p>
    <strong>Group:</strong> 
    <% if @expense.group %>
        <%= link_to @expense.group.group_name, group_path(@expense.group), class: "btn btn-link" %>
    <% end %>
</p>
<p>
    <strong>Added by:</strong> <%= @expense.added_by_user.name if @expense.added_by_user %>
</p>
<% if @expense.expense_splits.any? %>
    <ul>
        <% @expense.expense_splits.each do |split| %>
            <li>
                <strong><%= split.user.name %>:</strong>
                $<%= sprintf('%.2f', split.amount) %>
            </li>
        <% end %>
    </ul>
<% else %>
    <h3>Estimated Equal Split</h3>
    Owed to <%= @expense.added_by_user.name if @expense.added_by_user %>
    <% group_users = @expense.group.members %>
    <ul>
        <% split_amount = @expense.total_amount.to_f / group_users.count %>
        <% group_users.each do |user| %>
            <li>
                <strong><%= user.name %>:</strong>
                $<%= sprintf('%.2f', split_amount) %>
            </li>
        <% end %>
    </ul>
<% end %>
<%= link_to 'Back to Expenses', expenses_path, class: 'btn btn-secondary' %>